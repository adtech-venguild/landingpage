<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>VENGUILD â€“ Archetype Reveal</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700;900&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#0c1116; --card:#0f141a; --line:rgba(255,255,255,.08);
    --text:#e9ecf1; --muted:#a9b4c1; --gold:#ffdf9e; --accent:#37e07d;

    /* Positioning targets (tweak these % if you want nudges) */
    --hero-left-mobile: 40%;
    --pro-left-mobile: 60%;
    --finish-left-mobile: 50%;

    --hero-left-wide: -90%;     /* adventurer hugs the left on big screens */
    --pro-left-wide: -10%;     /* professional sits left-center, a bit right */
    --finish-left-wide: 23%;  /* button under the heroâ€™s shoes */

    --gap:30px;               /* visual spacing if needed elsewhere */
  }

  *{box-sizing:border-box}
  html,body{height:100%; margin:0}
  body{
    font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial;
    background: var(--bg); color: var(--text);
    min-height: 100dvh; display:grid; place-items:center; padding:14px;
    background-image: linear-gradient(to bottom, rgba(6,12,18,.55), rgba(6,12,18,.6)), url("assets/background/background1.png");
    background-size:cover; background-position:center;
  }

  /* Stage layout: characters left, glass panel right */
  .wrap{
    width:min(1200px,96vw);
    display:grid; gap:22px;
    grid-template-columns: 0.95fr 1.3fr;
    animation:fade .45s ease;
  }
  @keyframes fade{from{opacity:0; transform:translateY(8px)} to{opacity:1; transform:none}}

  /* LEFT: duo, aligned toe-to-toe */
  .gallery{
    position:relative;
    min-height:720px;         /* consistent visual height */
    overflow:visible;
  }
  .img{
    position:absolute; bottom:0;
    height:100%; width:auto; object-fit:contain;
    image-rendering:auto; -webkit-user-drag:none; user-select:none;
    filter: drop-shadow(0 14px 28px rgba(0,0,0,.55));
    opacity:0; transform:translate(-50%,6px);
    transition:opacity .6s ease, transform .6s ease;
    pointer-events:none;
  }
  .img.loaded{ opacity:1; transform:translate(-50%,0); }

  /* Mobile / narrow defaults â€” centered with slight right bias for pro */
  .hero{ left: var(--hero-left-mobile); z-index:6; }
  .pro { left: var(--pro-left-mobile);  z-index:7; } /* highest index as requested */

  /* Wide screens â€” anchor from left (no centering transform) */
  @media (min-width: 1200px){
    .hero{ left: var(--hero-left-wide);  transform:translate(0,0); }
    .hero.loaded{ transform:none; }
    .pro { left: var(--pro-left-wide);   transform:translate(0,0); }
    .pro.loaded { transform:none; }
  }

  /* Error badge if hero art canâ€™t be found */
  .assetError{
    position:absolute; left:0; bottom:64px;
    background:#1e2a3b; color:#ffd7d7; border:1px solid #6b2b2b;
    padding:10px 12px; border-radius:12px; font-size:13px; display:none;
    max-width:92%; z-index:9;
  }

  /* Golden CTA glued under the shoes */
  .finishBtn{
    position:absolute; bottom:6px;
    left: var(--finish-left-mobile); transform:translateX(-50%);
    display:inline-block; text-decoration:none; text-transform:uppercase;
    font-weight:900; letter-spacing:.04em; color:#2a1a00;
    background:linear-gradient(135deg,#ffe27a,#ffd35a,#ffb800);
    box-shadow:
      0 18px 22px rgba(0,0,0,.45),
      0 0 18px rgba(255,216,112,.55),
      inset 0 0 10px rgba(255,255,255,.28);
    border:1px solid rgba(255,244,198,.65);
    border-radius:999px;
    transition:transform .15s ease, box-shadow .2s ease, filter .2s ease;
    z-index:10;
    /* BIGGER + BOLDER */
    --scale: 1.5; /* <â€” bump this to grow the button quickly */
    font-size: calc(18px * var(--scale));
    padding: calc(13px * var(--scale)) calc(22px * var(--scale));
    min-width: calc(240px * var(--scale));
  }
  .finishBtn:hover{
    transform:translateX(-50%) translateY(-1px) scale(1.02);
    box-shadow:0 14px 28px rgba(0,0,0,.55), 0 0 26px rgba(255,216,112,.75), inset 0 0 12px rgba(255,255,255,.35);
    filter:saturate(1.08);
  }
  @media (min-width: 1200px){
    .finishBtn{ left: var(--finish-left-wide); }
  }

  /* RIGHT: glass panel hugging the corners */
  .pane{ position:relative; z-index:5; }
  .pane::before{
    content:"";
    position:absolute; inset:-26px; border-radius:24px;
    background:
      radial-gradient(120% 80% at 80% 40%, rgba(111,227,255,.10), transparent 60%),
      radial-gradient(90% 70%  at 20% 70%, rgba(55,224,125,.10),  transparent 65%),
      rgba(10,16,23,.55);
    box-shadow:
      0 0 0 1px rgba(255,255,255,.08),
      0 20px 80px rgba(0,0,0,.55),
      inset 0 0 200px rgba(55,224,125,.10),
      inset 0 0 140px rgba(111,227,255,.08);
    backdrop-filter: blur(6px);
    pointer-events:none;
  }
  .inner{ padding:12px 14px; position:relative; }

  /* Typography & chips */
  h1{
    font-family:Cinzel,serif; margin:2px 2px 8px;
    font-size: clamp(28px, 4.2vw, 46px);
    color: var(--gold); line-height:1.15;
  }
  .muted{color:var(--muted)}
  .chipsRow{display:flex; flex-wrap:wrap; gap:10px; align-items:center; margin:8px 2px 6px}
  .chip{
    padding:8px 12px; border-radius:999px; border:1px solid #1b2738; background:#0b1015;
    font-weight:700; color:#cfe6ff; letter-spacing:.02em;
  }
  .rank{
    width:auto; min-width:44px; height:44px; padding:0 12px; display:grid; place-items:center;
    border-radius:10px; border:1px solid #5f80ae; background:#0b1015; color:#cfe6ff;
    font-weight:900; font-size:20px;
  }
  .pill{
    display:inline-flex; align-items:center; gap:8px;
    padding:8px 12px; border-radius:999px; font-weight:800;
    color:#0c1116; background:linear-gradient(135deg, var(--accent), #2cd18c, #1aa37c);
  }

  .sectionTitle{font-weight:900; letter-spacing:.05em; margin:12px 2px 6px; color:#cfe3ff; text-transform:uppercase; font-size:13px}

  .desc{
    background:#0b1015; border:1px solid #1b2738; border-radius:14px;
    padding:16px; line-height:1.7; margin:8px 2px 0;
    opacity:0; transform:translateY(6px); animation:fadeInUp .45s ease .08s forwards
  }
  @keyframes fadeInUp{ to{opacity:1; transform:none} }

  .jobHead{
    font-family:Cinzel,serif;
    font-size: clamp(26px, 4.2vw, 40px);
    font-weight:900; margin:0 0 2px;
  }
  .jobSub{
    font-size: clamp(14px, 2vw, 16px);
    color:#9fd2ff; margin:0 0 10px;
    letter-spacing:.02em; font-weight:700;
  }

  .chips{display:flex; flex-wrap:wrap; gap:8px; margin:0 2px 8px}
  .chip.active{
    color:#0c1116; border-color:transparent;
    background:linear-gradient(135deg, #ffe27a, #ffd35a, #ffb800);
    box-shadow:0 0 12px rgba(255,216,112,.45), inset 0 0 8px rgba(255,255,255,.25);
  }
  .ranks{display:flex; gap:8px; flex-wrap:wrap; margin:0 2px}
  .rank.active{
    color:#0c1116; background:linear-gradient(135deg,#a0f2ff,#6fe3ff);
    box-shadow:0 0 16px rgba(160,242,255,.5), inset 0 0 10px rgba(255,255,255,.25);
  }

  /* Element orbs (compact) */
  .eaWrap{ display:flex; align-items:center; gap:10px; flex-wrap:wrap; margin:6px 2px 0 2px }
  .eaLabel{ font-weight:800; color:#cfe3ff; letter-spacing:.04em; text-transform:uppercase; font-size:12px; }
  .orbDock{ --R:22px; --speed:22s; position: relative; width: calc(var(--R) * 2); height: calc(var(--R) * 2); pointer-events:none; filter: drop-shadow(0 6px 14px rgba(0,0,0,.45)); }
  .orb-track{ position:absolute; inset:0; border-radius:50%; animation:orb-ccw var(--speed) linear infinite; }
  @keyframes orb-ccw{ to{ transform:rotate(-360deg);} }
  .orb-wrap{ position:absolute; top:50%; left:50%; transform: rotate(var(--phase)) translateX(var(--R)) translate(-50%,-50%); }
  .orb{ --size:26; --c:#fff; position:absolute; top:50%; left:50%; width:calc(var(--size)*1px); height:calc(var(--size)*1px); transform:translate(-50%,-50%); border-radius:50%;
        background: radial-gradient(circle at 32% 28%, transparent 0 38%, rgba(0,0,0,.55) 100%), radial-gradient(circle at 70% 70%, color-mix(in srgb, var(--c) 70%, transparent), transparent 60%);
        border:1px solid color-mix(in srgb, var(--c) 60%, transparent 40%); box-shadow:0 0 10px var(--c), 0 0 26px var(--c), 0 0 60px color-mix(in srgb, var(--c) 55%, transparent); }

  /* Stack on narrow screens */
  @media (max-width: 1080px){
    .wrap{ grid-template-columns:1fr }
    .gallery{ min-height:600px }
  }
  @media (max-width: 760px){
    .gallery{ min-height:720px }
  }

  /* Luminous orb with strong colored emission */
.orb{
  --size:26;
  --c:#fff;                           /* set from JS */
  --core: color-mix(in srgb, var(--c) 80%, white 35%);
  --glow: color-mix(in srgb, var(--c) 85%, white 25%);
  position:absolute; top:50%; left:50%;
  width:calc(var(--size)*1px); height:calc(var(--size)*1px);
  transform:translate(-50%,-50%); border-radius:50%;
  background:
    radial-gradient(circle at 30% 28%, rgba(255,255,255,.55) 0 22%, transparent 45%),
    radial-gradient(circle at 50% 50%, var(--core) 0 60%, transparent 62%);
  border:1px solid color-mix(in srgb, var(--c) 65%, transparent 35%);
  box-shadow:
    0 0 14px var(--glow),
    0 0 36px var(--glow),
    0 0 84px color-mix(in srgb, var(--glow) 85%, transparent);
  will-change: transform, filter;
}

/* Inner bloom (tight, bright) */
.orb::before{
  content:"";
  position:absolute; inset:-22px; border-radius:50%;
  background: radial-gradient(circle, color-mix(in srgb, var(--glow) 20%, transparent) 0%, transparent 68%);
  filter: blur(16px);
  opacity:.55;
  animation: orb-pulse 3.6s ease-in-out infinite;
}

/* Outer aura (big soft halo, blends with background) */
.orb::after{
  content:"";
  position:absolute; inset:-40px; border-radius:50%;
  background: radial-gradient(circle, color-mix(in srgb, var(--glow) 35%, transparent) 0%, transparent 70%);
  filter: blur(22px);
  opacity:.9;
  mix-blend-mode: screen;             /* makes the color â€œemitâ€ */
}
.orb{
  /* ...existing... */
  box-shadow:
    0 0 14px var(--glow),
    0 0 36px var(--glow),
    0 0 84px color-mix(in srgb, var(--glow) 85%, transparent),
    0 0 140px color-mix(in srgb, var(--glow) 70%, transparent); /* extra halo */
}



</style>
</head>
<body>
  <div class="wrap">
    <!-- LEFT: Professional (highest z-index) + Adventurer -->
    <div class="gallery">
      <img id="imgPro"  class="img pro"  alt="Professional">
      <img id="imgHero" class="img hero" alt="Adventurer">
      <div id="assetError" class="assetError"></div>
      <a id="finishBtn" class="finishBtn" href="zonepage.html">Finish this quest!</a>
    </div>

    <!-- RIGHT: GLASS text panel -->
    <section class="pane">
      <div class="inner">
        <h1 id="greeting">The Guild has weighed your essence.</h1>

        <div class="chipsRow">
          <div class="chip" id="typeChip">Type: â€”</div>
          <div class="chip">Level: <span id="lvl" style="margin-left:6px;font-weight:900">â€”</span></div>
          <div class="chip">Rank: <span id="rankBox">â€”</span></div>
        </div>

        <div class="sectionTitle" style="margin-top:6px">Recommended Adventurer</div>
        <div class="desc" id="jobBlock">
          <div id="jobHead" class="jobHead">â€”</div>
          <p class="jobSub" id="jobClass">â€”</p>
          <div id="description">â€”</div>
        </div>

        <div class="chipsRow">
          <a class="chip" style="cursor:pointer; text-decoration:none" href="personalitytest.html">â†º Retake the quick test</a>
          <a class="chip" style="cursor:pointer; text-decoration:none; border-style:dashed" href="personalitytest_deep.html">ðŸœ‚ Take a deeper assessment</a>
        </div>
        <p class="muted" style="font-size:13px; margin:2px 2px 6px">
          This is a recommendation based on your personality responses. You can retake the quick test, or try a deeper assessment for more nuanced results.
        </p>

        <div class="chipsRow" style="margin-top:8px"><div class="pill" id="totalPill">Total Level: â€”</div></div>

        <div class="eaWrap">
          <div class="eaLabel">Elemental Affinity:</div>
          <h2 id="elemTitle" style="margin:0; font-family:Cinzel,serif;">Loadingâ€¦</h2>
          <div class="orbDock"><div class="orb-track" id="orbTrack"></div></div>
        </div>
        <p class="muted" id="elemSubtitle"></p>
        <div class="desc" id="elemDesc">â€”</div>

        <div class="sectionTitle">Guild Title Recommendation:</div>
        <div class="chips" id="levelChips">
          <div class="chip" data-level="Aspirant">Aspirant</div>
          <div class="chip" data-level="Apprentice">Apprentice</div>
          <div class="chip" data-level="Advanced I">Advanced I</div>
          <div class="chip" data-level="Advanced II">Advanced II</div>
          <div class="chip" data-level="Master">Master</div>
        </div>

        <div class="sectionTitle">Guild Rank Recommendation:</div>
        <div class="ranks" id="rankRow">
          <div class="rank" data-r="F">F</div><div class="rank" data-r="E">E</div><div class="rank" data-r="D">D</div>
          <div class="rank" data-r="C">C</div><div class="rank" data-r="B">B</div><div class="rank" data-r="A">A</div>
          <div class="rank" data-r="S">S</div>
        </div>
      </div>
    </section>
  </div>

<script>
/* ---------- tiny helpers ---------- */
const $ = s => document.querySelector(s);
const safe = x => (x==null ? '' : String(x));
const dedup = arr => [...new Set(arr)];
const sortDigits = s => s.split('').sort().join('');
async function getJSON(p){ const r=await fetch(p,{cache:'no-store'}); if(!r.ok) throw new Error(p+' â†’ '+r.status); return r.json(); }

/* Level & rank */
function levelTitle(total){ if(total>=100) return 'Master'; if(total>=76) return 'Advanced II'; if(total>=51) return 'Advanced I'; if(total>=26) return 'Apprentice'; return 'Aspirant'; }
function baseRankFor(level){ return level==='Master'?'B':level==='Advanced II'?'C':level==='Advanced I'?'D':level==='Apprentice'?'E':'F'; }
function countVerifications(){ try{ const v=JSON.parse(localStorage.getItem('venguild_verifications')||'{}')||{}; return ['twoIDs','employment','diploma','tor','address','payslip','billing','ecommerce'].reduce((n,k)=>n+(v[k]?1:0),0);}catch{return 0;} }
function finalRankFor(level){ const L=['F','E','D','C','B','A','S']; const b=L.indexOf(baseRankFor(level)); const steps=Math.min(countVerifications(), L.length-1-b); return L[b+steps]; }
// Stronger base colors for brighter glow
// Strong base hues + Aether GREEN
// Element â†’ base hue
const ORB_COLOR = {
  '1': '#8b5a2b', // Earth = brown
  '2': '#ff2a2a', // Fire  = red
  '3': '#ffffff', // Air   = pure white
  '4': '#00d2ff', // Water = aqua blue
  '5': '#37e07d'  // Aether= green
};




/* ---------- main ---------- */
(async function main(){
  const profileRaw = localStorage.getItem('venguild_complete_profile');
  const resultRaw  = localStorage.getItem('venguild_personality');
  if (!profileRaw || !resultRaw){
    $('#greeting').textContent = 'We need your profile and a test result.';
    return;
  }
  const profile = JSON.parse(profileRaw);
  const result  = JSON.parse(resultRaw);

  // Totals / Title / Rank (kept)
  const expTotal = (profile.experience||[]).reduce((s,x)=> s + Number(x.computedLevel || (x.years||0)*(x.multiplier||0)), 0);
  const eduTotal = (profile.education||[]).reduce((s,x)=> s + Number(x.multiplier||0), 0);
  const total    = expTotal + eduTotal;
  const title    = levelTitle(total);
  const rank     = finalRankFor(title);

  $('#greeting').textContent = `The Guild has weighed your essence, ${safe(profile?.name?.first||'Adventurer')}.`;
  $('#totalPill').textContent = `Total Level: ${total}`;
  $('#lvl').textContent       = total;
  $('#rankBox').textContent   = rank;
  for (const c of document.querySelectorAll('#levelChips .chip')) c.classList.toggle('active', c.dataset.level===title);
  for (const r of document.querySelectorAll('#rankRow .rank'))   r.classList.toggle('active', r.dataset.r===rank);

  // 4-letter or 4-letter-ER code
  const baseCode = safe(result.code || result.code4 || '').toUpperCase();
  const ER       = safe(result.exaltedRooted || result.ER || '').toUpperCase();
  const useER    = total >= 51 && (ER === 'E' || ER === 'R');
  const desired  = useER ? `${baseCode}-${ER}` : baseCode;

  // MONSTER/neutral case
  const isMonster = !!result.monster || baseCode === 'XXXX' || (Array.isArray(result.neutralDims) && result.neutralDims.length >= 2);

  // Map to job (unless monster)
  let jobRow = null;
  let jobClass='â€”', jobType='â€”', epithet='â€”', desc='â€”', finalCode='';
  if (!isMonster){
    try{
      const jobs = await getJSON('data/adventurer_jobs.json');
      const norm = s => safe(s).toUpperCase().trim();
      jobRow = (jobs||[]).find(j => norm(j.Personality||j.personality||j['ADVR Final']||'') === desired)
           || (jobs||[]).find(j => {
                const advr = norm(j['ADVR Code']||j.advr||j.code||'');
                const er   = norm(j['Exalted/Rooted']||j.exalted||j.er||'');
                return useER ? `${advr}-${er}` === desired : advr === baseCode;
              });
      jobClass = jobRow?.['Job Class'] || jobRow?.jobClass || 'â€”';
      jobType  = jobRow?.['Job Type']  || jobRow?.jobType  || 'â€”';
      epithet  = jobRow?.Epiteth       || jobRow?.epithet  || 'â€”';
      desc     = jobRow?.Description   || jobRow?.description || 'â€”';
      finalCode= safe(jobRow?.['Final Code'] || jobRow?.finalCode || '');
    }catch(e){ console.warn('adventurer_jobs.json failed:', e?.message||e); }
  }

  $('#typeChip').textContent  = `Type: ${isMonster ? 'â€”' : jobType}`;
  $('#jobHead').textContent   = isMonster ? 'Unconscious Entity (Fragmented)' :
                            (jobClass && epithet) ? `${jobClass} (${epithet})` : (jobClass || epithet || 'â€”');
  $('#jobClass').textContent  = isMonster ? 'You are not whole yet.' : jobClass;
  $('#description').textContent = isMonster
    ? 'Your answers leaned too neutral across multiple dimensions, revealing an incomplete consciousness. In the Guildâ€™s bestiary, such beings resemble monstersâ€”they react, but rarely choose. Return when your will is clearer, or retake the assessment now.'
    : desc;

  // Gender
  const g = (profile.gender||'').toLowerCase();
  const gCode = (g==='m' || g==='male') ? 'm' : 'f';

  // Adventurer/Monster asset â€” NO FALLBACK; clear error if missing
  const hero  = $('#imgHero');
  const aerr  = $('#assetError');
  function showAssetError(msg){
    if (hero) hero.style.display='none';
    aerr.textContent = 'âš ï¸ ' + msg;
    aerr.style.display = 'block';
  }
  if (isMonster){
    const monsterPath = 'assets/default/creep.png';
    hero.onload  = () => hero.classList.add('loaded');
    hero.onerror = () => showAssetError(`No file retrieved: ${monsterPath}`);
    hero.src = monsterPath;
  } else {
    if (!finalCode){
      showAssetError('No finalCode computed from job mapping; cannot load adventurer art.');
    } else {
      const heroPath = `assets/adventurers/${finalCode.toLowerCase()}_${gCode}.png`;
      hero.onload  = () => hero.classList.add('loaded');
      hero.onerror = () => showAssetError(`No file retrieved: ${heroPath}`);
      hero.src = heroPath;
    }
  }

  // Professional (highest z-index)
  const countries = await getJSON('data/country_ethnicity.json').catch(()=>[]);
  let regionCode = '';
  if (Array.isArray(countries)){
    const c = countries.find(x => safe(x.Country||x.country||x.name).toLowerCase() === safe(profile.citizenship).toLowerCase());
    if (c){ const rc=safe(c.code||c.Code||c.region||''); regionCode = rc.startsWith('_') ? rc.slice(1) : rc; }
  }
  const top = (profile.experience||[]).slice().sort((a,b)=> (b.computedLevel||0) - (a.computedLevel||0))[0];
  const pro = $('#imgPro');
  if (top?.code && regionCode){
    const proPath = `assets/professional/${String(top.code).trim()}_${gCode}_${regionCode}.png`;
    pro.onload = ()=> pro.classList.add('loaded');
    pro.onerror = ()=> pro.style.display='none';
    pro.src = proPath;
  } else {
    pro.style.display='none';
  }

  /* Elemental Affinity look-up */
  const [sectors, programs, elementsFile] = await Promise.all([
    getJSON('data/sectors.json').catch(()=>[]),
    getJSON('data/programs.json').catch(()=>[]),
    getJSON('data/elements.json').catch(()=>[])
  ]);
  const sectorCodeToElem = new Map((sectors||[]).map(s=>[
    String(s.Code||s.code||'').trim(), Number(s.ElementCode||s.elementCode||0)
  ]));
  const progToElem = (programs||[]).reduce((m,p)=>{
    m[String(p.Program||p.title||'').trim().toLowerCase()] = Number(p.ElementCode||p.elementCode||0);
    return m;
  },{});
  const expElems = (profile.experience||[]).map(x=> sectorCodeToElem.get(String(x.code||'').trim()) || 0);
  const eduElems = (profile.education||[]).map(e=> progToElem[String(e.program||'').trim().toLowerCase()] || 0);
  const comboKey = sortDigits(dedup([...expElems, ...eduElems].filter(Boolean).map(String)).join(''));

  let comboName='â€”', comboDesc='â€”';
  if (comboKey && Array.isArray(elementsFile) && elementsFile.length){
    const hit = elementsFile.find(it => sortDigits(String(it.Code||it.code||''))===comboKey);
    comboName = hit ? (hit.Combination||hit.name||hit.title||'â€”') : 'â€”';
    comboDesc = hit ? (hit.Description||hit.description||'â€”') : 'â€”';
  }
  $('#elemTitle').textContent = comboName || 'â€”';
  $('#elemDesc').textContent  = comboDesc || 'â€”';

  // Orbs
  const digits = (comboKey||'').split('').filter(d => ORB_COLOR[d]);
  const track = $('#orbTrack');
  if (!digits.length){ track.parentElement.style.display='none'; }
  else{
    const spacing = 22, R = 22;
    track.style.setProperty('--speed', (digits.length===1?'18s':digits.length===2?'20s':'22s'));
    track.innerHTML = '';
    digits.forEach((d,i)=>{
      const wrap = document.createElement('div');
      wrap.className = 'orb-wrap'; wrap.style.setProperty('--phase', (i*spacing)+'deg'); wrap.style.setProperty('--R', R+'px');
      const orb = document.createElement('div'); orb.className = 'orb'; orb.style.setProperty('--c', ORB_COLOR[d]); orb.style.setProperty('--size', ({'1':28,'2':27,'3':26,'4':26,'5':25}[d]||26));
      wrap.appendChild(orb);
      track.appendChild(wrap);
    });
  }
})();
</script>
</body>
</html>
